# ğŸ”§ Development Environment

Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ¿Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ñ dev Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸ĞµĞ¼ Ğ´Ğ»Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¸ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.

> **ğŸ“¦ Ğ§Ñ‚Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾:** ĞŸĞ»Ğ°Ğ½ 1 - ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ (m1, m3-m9, m11, m13-m14). ĞÑ‚Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (m2, m5, m10.x, m12) Ğ±ÑƒĞ´ÑƒÑ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ² ĞŸĞ»Ğ°Ğ½Ğµ 2.

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Git Repository                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚   main branch (Production)     dev branch (Development)     â”‚
â”‚   â”œâ”€â”€ .env                     â”œâ”€â”€ .env.dev                 â”‚
â”‚   â”œâ”€â”€ GCP: seeyay-ai-tg-bot    â”œâ”€â”€ GCP: seeyay-ai-dev       â”‚
â”‚   â””â”€â”€ Real users               â””â”€â”€ Test data only           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### 1. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° GCP Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ (Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·)

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚
gcloud projects create seeyay-ai-dev --name="Seeyay AI Development"

# Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ API
gcloud services enable \
    firestore.googleapis.com \
    aiplatform.googleapis.com \
    cloudbuild.googleapis.com \
    run.googleapis.com \
    secretmanager.googleapis.com \
    --project=seeyay-ai-dev

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Firestore
gcloud firestore databases create --location=europe-west4 --project=seeyay-ai-dev

# ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ADC
gcloud auth application-default login
gcloud config set project seeyay-ai-dev
```

> **ğŸ’³ Ğ‘Ğ¸Ğ»Ğ»Ğ¸Ğ½Ğ³:** Ğ”Ğ»Ñ Vertex AI Ğ¸ Cloud Run Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ñ‚ÑŒ billing account Ğ² [ĞºĞ¾Ğ½ÑĞ¾Ğ»Ğ¸ GCP](https://console.cloud.google.com/billing/linkedaccount?project=seeyay-ai-dev)

### 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ dev Ğ±Ğ¾Ñ‚Ğ° Ğ² Telegram (Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·)

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ [@BotFather](https://t.me/BotFather)
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ `/newbot`
3. ĞĞ°Ğ·Ğ¾Ğ²Ğ¸Ñ‚Ğµ ĞµĞ³Ğ¾ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: "Ğ¡Ğ˜Ğ¯Ğ™ AI Dev Bot")
4. Username: `siay_ai_dev_bot`
5. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ‚Ğ¾ĞºĞµĞ½

### 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞµĞºÑ€ĞµÑ‚Ñ‹ Ğ² Secret Manager

```bash
echo -n "DEV_BOT_TOKEN" | gcloud secrets create telegram-bot-token \
    --data-file=- --replication-policy="automatic" --project=seeyay-ai-dev
```

### 4. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ .env.dev

```env
BOT_TOKEN=your_dev_bot_token_from_botfather
GCP_PROJECT_ID=seeyay-ai-dev
GCP_LOCATION=europe-west4
BACKEND_URL=http://localhost:8000
MINI_APP_URL=http://localhost:3000
USE_POLLING=true
```

> **âš ï¸ Ğ’Ğ°Ğ¶Ğ½Ğ¾:** `USE_POLLING=true` Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ polling Ñ€ĞµĞ¶Ğ¸Ğ¼ Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸.

### 5. Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

```bash
# ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ĞµÑÑŒ Ğ½Ğ° dev Ğ²ĞµÑ‚ĞºÑƒ
git checkout dev

# Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ Ñ‡Ñ‚Ğ¾ ADC Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ½Ğ° dev Ğ¿Ñ€Ğ¾ĞµĞºÑ‚
gcloud config get-value project  # Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ: seeyay-ai-dev

# Ğ—Ğ°Ğ¿ÑƒÑĞº backend + bot
python run_dev_env.py

# Ğ’ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¼ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğµ: Mini App
cd mini-app
npm install  # Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ñ€Ğ°Ğ·
npm run dev
```

> **ğŸ“± Mini App:** Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ğ½Ğ° http://localhost:3000. ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ "Ğ¡Ğ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ²ÑĞµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ (dev)" Ğ² Ğ±Ğ¾Ñ‚Ğµ Ğ²Ñ‹ ÑƒĞ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ URL Ğ´Ğ»Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ (Telegram Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ HTTP).

### 6. Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° dev ÑÑ‚ĞµĞ½Ğ´ (Cloud Run)

```bash
# Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² (bot, backend, mini-app)
gcloud builds submit . --config=cloudbuild-dev.yaml --project=seeyay-ai-dev

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
gcloud run services list --project=seeyay-ai-dev

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
gcloud logging read "resource.type=cloud_run_revision" --project=seeyay-ai-dev --limit=50
```

## Workflow Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

### Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

```bash
# 1. ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğ½Ğ° dev Ğ²ĞµÑ‚ĞºÑƒ
git checkout dev

# 2. Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ÑŒÑÑ Ñ‡Ñ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ dev Ğ¿Ñ€Ğ¾ĞµĞºÑ‚
gcloud config set project seeyay-ai-dev

# 3. Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¸ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾
python run_dev_env.py

# 4. ĞšĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
git add .
git commit -m "feat: Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹"
git push origin dev
```

### Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° dev ÑÑ‚ĞµĞ½Ğ´

```bash
# Ğ—Ğ°Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¸Ñ‚ÑŒ Ğ½Ğ° Cloud Run Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
gcloud builds submit . --config=cloudbuild-dev.yaml --project=seeyay-ai-dev

# ĞŸÑ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ dev Ğ±Ğ¾Ñ‚Ğ¾Ğ¼ (@siay_ai_dev_bot)
```

### Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ² production

```bash
# 1. Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ÑŒÑÑ Ñ‡Ñ‚Ğ¾ Ğ²ÑÑ‘ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ² dev
git checkout dev
# ... Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ...

# 2. ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğ½Ğ° main
git checkout main

# 3. Ğ’Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¸Ğ· dev
git merge dev

# 4. ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ GCP Ğ½Ğ° production
gcloud config set project seeyay-ai

# 5. Ğ—Ğ°Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¸Ñ‚ÑŒ
gcloud builds submit . --config=cloudbuild.yaml --project=seeyay-ai

# 6. Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğ² dev
git checkout dev
gcloud config set project seeyay-ai-dev
```

## ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ

### Ğ§Ñ‚Ğ¾ Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Production | Development |
|-----------|------------|-------------|
| GCP Project | seeyay-ai | seeyay-ai-dev |
| Project Number | 445810320877 | 269162169877 |
| Firestore | Real users | Test data |
| Telegram Bot | @siay_ai_bot | @siay_ai_dev_bot |
| Git Branch | main | dev |
| Config File | .env | .env.dev |
| Cloud Build | cloudbuild.yaml | cloudbuild-dev.yaml |

### ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°

- âœ… **ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** - Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Firestore Ğ±Ğ°Ğ·Ñ‹
- âœ… **Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** - Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ·Ğ°Ñ‚Ñ€Ğ¾Ğ½ÑƒÑ‚ÑŒ real users
- âœ… **Ğ§Ğ¸ÑÑ‚Ğ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ** - dev ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ñ‹ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾ Ğ¾Ñ‚ prod
- âœ… **ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ Ğ±Ğ¾Ñ‚Ñ‹** - Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹, Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ‡Ğ°Ñ‚Ñ‹
- âœ… **ĞÑ‚ĞºĞ°Ñ‚** - Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº stable main

## Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

### ĞŸĞ»Ğ°Ğ½ 1 (Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾)

ĞŸÑ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ flow Ğ² dev Ğ±Ğ¾Ñ‚Ğµ:

1. âœ… `/start` â†’ m1 (Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ñ 4 ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²)
2. âœ… ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ "Ğ›ĞµĞ´ÑĞ½Ğ¾Ğ¹ ĞºÑƒĞ±" â†’ m3 (onboarding) Ğ¸Ğ»Ğ¸ m4.1 (ĞµÑĞ»Ğ¸ ÑƒĞ¶Ğµ Ğ±Ñ‹Ğ»Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸)
3. âœ… ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ "ğŸ’ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ PRO-Ñ€ĞµĞ¶Ğ¸Ğ¼" â†’ m4.2 (ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ 6âš¡)
4. âœ… ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ„Ğ¾Ñ‚Ğ¾ â†’ m6 (Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼) â†’ m7.1/m7.2/m7.3/m8 (Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚)
5. âœ… ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ "ğŸ” ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ 1âš¡" â†’ ÑĞ½Ğ¾Ğ²Ğ° m4.1 Ñ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¼ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ¼
6. âœ… ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ "ğŸ“¥ Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»" â†’ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ ĞºĞ°Ğº Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚
7. âœ… ĞŸÑ€Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸:
   - Ğ•ÑĞ»Ğ¸ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ >= 1 Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸ĞµĞ¹ â†’ m9 (ÑÑ‚Ğ°Ñ€Ñ‚ĞµÑ€-Ğ¿Ğ°Ğº 100âš¡/990â‚½)
   - Ğ˜Ğ½Ğ°Ñ‡Ğµ â†’ m11 (Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²)
8. âœ… `/menu` â†’ m13 (Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ)
9. âœ… ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ "âš¡ ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ" â†’ m14 (ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²)

### ĞŸĞ»Ğ°Ğ½ 2 (Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)

ĞÑ‚Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ cron):
- â³ m2 (Ñ‡ĞµÑ€ĞµĞ· 1 Ñ‡Ğ°Ñ Ğ¿Ğ¾ÑĞ»Ğµ /start)
- â³ m5 (Ñ‡ĞµÑ€ĞµĞ· 7 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ¿Ğ¾ÑĞ»Ğµ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ°)
- â³ m10.1 (Ñ‡ĞµÑ€ĞµĞ· 60 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ¿Ğ¾ÑĞ»Ğµ 1-Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸)
- â³ m10.2 (Ñ‡ĞµÑ€ĞµĞ· 60 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ¿Ğ¾ÑĞ»Ğµ 2-Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸)
- â³ m12 (Ñ‡ĞµÑ€ĞµĞ· 24 Ñ‡Ğ°ÑĞ° Ğ¿Ğ¾ÑĞ»Ğµ m9)

## ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸ÑĞ¼Ğ¸

### Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ñ‡ĞµĞºĞ»Ğ¸ÑÑ‚

```bash
# ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğ½Ğ° dev
git checkout dev
gcloud config set project seeyay-ai-dev
python run_dev_env.py

# ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğ½Ğ° production (Ğ´Ğ»Ñ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ)
git checkout main
gcloud config set project seeyay-ai-tg-bot
./deploy.sh
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ

```bash
# Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ²ĞµÑ‚ĞºĞ°
git branch --show-current

# Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ GCP Ğ¿Ñ€Ğ¾ĞµĞºÑ‚
gcloud config get-value project
```

## Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ½ÑĞ°Ğ½ÑÑ‹

### Polling vs Webhook

- **Production (Cloud Run)**: Ğ‘Ğ¾Ñ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ webhook â€” Telegram Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ updates Ğ½Ğ° URL
- **Local dev**: Ğ‘Ğ¾Ñ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ polling â€” ÑĞ°Ğ¼ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ updates Ñƒ Telegram

ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ `USE_POLLING=true` Ğ² `.env.dev`.

### HTTP vs HTTPS Ğ´Ğ»Ñ Mini App

Telegram Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ **HTTPS** Ğ´Ğ»Ñ WebApp ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº. Ğ”Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ñ `http://localhost:3000` Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ¾Ğ±Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:

- ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ ĞºĞ°Ğº `"Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¸Ğ»ÑŒ (dev)"`
- ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ Ğ±Ğ¾Ñ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ URL Ğ´Ğ»Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ
- Ğ’ production Ñ HTTPS Ğ²ÑÑ‘ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ°Ğº Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ°Ñ WebApp ĞºĞ½Ğ¾Ğ¿ĞºĞ°

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ½Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Local Development                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Terminal 1: python run_dev_env.py                         â”‚
â”‚  â”œâ”€â”€ Backend (FastAPI) â†’ http://localhost:8000             â”‚
â”‚  â””â”€â”€ Bot (aiogram polling) â†’ @siay_ai_dev_bot              â”‚
â”‚                                                            â”‚
â”‚  Terminal 2: cd mini-app && npm run dev                    â”‚
â”‚  â””â”€â”€ Mini App (Vite) â†’ http://localhost:3000               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ½Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

### Cloud Run (dev ÑÑ‚ĞµĞ½Ğ´)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Cloud Run (seeyay-ai-dev)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  seeyay-bot â†’ Telegram bot Ñ webhook                       â”‚
â”‚  seeyay-api â†’ Backend API                                  â”‚
â”‚  seeyay-miniapp â†’ React Mini App                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ
git branch --show-current
gcloud config get-value project

# Ğ›Ğ¾Ğ³Ğ¸ Cloud Run (dev ÑÑ‚ĞµĞ½Ğ´)
gcloud logging read "resource.type=cloud_run_revision AND resource.labels.service_name=seeyay-bot" \
    --project=seeyay-ai-dev --limit=50

# Firestore ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ
# https://console.cloud.google.com/firestore?project=seeyay-ai-dev

# Cloud Build Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
gcloud builds list --project=seeyay-ai-dev --limit=10

# Cloud Run ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
gcloud run services list --project=seeyay-ai-dev
```

## Troubleshooting

### Ğ‘Ğ¾Ñ‚ Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ Ğ½Ğ° /start

1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ‡Ñ‚Ğ¾ `USE_POLLING=true` Ğ² `.env.dev`
2. ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ `python run_dev_env.py`
3. Ğ’ Ğ»Ğ¾Ğ³Ğ°Ñ… Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ: `Webhook deleted, will use polling mode`

### "Permission denied" Ğ¿Ñ€Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğµ Ğº Firestore/Vertex AI

```bash
# Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ Ñ‡Ñ‚Ğ¾ ADC Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½
gcloud auth application-default login

# Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹
gcloud config set project seeyay-ai-dev
```

### ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ¿Ñ€Ğ¸ Ğ´ĞµĞ¿Ğ»Ğ¾Ğµ Ğ½Ğ° dev ÑÑ‚ĞµĞ½Ğ´

Ğ¡Ğ¼. Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ³Ğ°Ğ¹Ğ´ Ğ² [TROUBLESHOOTING.md](TROUBLESHOOTING.md)

ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑˆĞ°Ğ³Ğ¸:
1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Cloud Build service account Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ° `roles/run.admin` Ğ¸ `roles/iam.serviceAccountUser`
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ²ÑĞµ API Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹
3. ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ Ğ±Ğ¸Ğ»Ğ´Ğ°: `gcloud builds log <BUILD_ID> --project=seeyay-ai-dev`

### TypeScript Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ² Mini App

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ğ½Ñ‚ĞµÑ€
npm run lint

# Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹ Ñ‚Ğ¸Ğ¿Ğ¾Ğ² - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ sync Ğ¼ĞµĞ¶Ğ´Ñƒ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸
```

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² dev Ğ²ĞµÑ‚ĞºĞ¸

```
Seeyay.ai/
â”œâ”€â”€ .env.dev              # Dev ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ğ½Ğµ Ğ² git)
â”œâ”€â”€ run_dev_env.py        # Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° dev Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
â”œâ”€â”€ README.DEV.md         # Ğ­Ñ‚Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â””â”€â”€ ... Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
```

## ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
git status
gcloud config list

# Ğ›Ğ¾Ğ³Ğ¸ Cloud Run (ĞµÑĞ»Ğ¸ Ğ·Ğ°Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¸Ğ»Ğ¸ Ğ² dev)
gcloud logging read "resource.type=cloud_run_revision" --project=seeyay-ai-dev --limit=50

# Firestore ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ
# https://console.cloud.google.com/firestore?project=seeyay-ai-dev
```
