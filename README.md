# Ğ¡Ğ˜Ğ¯Ğ™ AI - Telegram Ğ±Ğ¾Ñ‚ Ğ´Ğ»Ñ Ğ½ĞµĞ¹Ñ€Ğ¾Ñ„Ğ¾Ñ‚Ğ¾ÑĞµÑÑĞ¸Ğ¹

Telegram Ğ±Ğ¾Ñ‚ Ñ Mini App Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ AI-Ñ„Ğ¾Ñ‚Ğ¾ÑĞµÑÑĞ¸Ğ¹ Ğ² Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… ÑÑ‚Ğ¸Ğ»ÑÑ….

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Google Cloud (europe-west4)               â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Cloud Run   â”‚  â”‚  Cloud Run   â”‚  â”‚  Cloud Run   â”‚      â”‚
â”‚  â”‚    Bot       â”‚  â”‚    API       â”‚  â”‚  Mini App    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                                  â”‚
â”‚         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚         â”‚    â”‚                         â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Firestore  â”‚  â”‚Secret Managerâ”‚  â”‚  Vertex AI   â”‚     â”‚
â”‚  â”‚   Database   â”‚  â”‚   (secrets)  â”‚  â”‚ (Gemini API) â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- Ğ“Ğ°Ğ»ĞµÑ€ĞµÑ ÑÑ‚Ğ¸Ğ»ĞµĞ¹ Ñ„Ğ¾Ñ‚Ğ¾ÑĞµÑÑĞ¸Ğ¹ Ñ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑĞ¼Ğ¸
- ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¾Ğ¼ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
- Ğ’Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ñ„Ğ¾Ñ‚Ğ¾ Ğ¸ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹/PRO)
- Batch-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ñ„Ğ¾Ñ‚Ğ¾
- Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ¾Ğ² Ğ¸ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
Seeyay.ai/
â”œâ”€â”€ bot/                    # Telegram Ğ±Ğ¾Ñ‚
â”‚   â”œâ”€â”€ Dockerfile         
â”‚   â”œâ”€â”€ handlers/          # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
â”‚   â”œâ”€â”€ services/          # Vertex AI Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
â”‚   â””â”€â”€ main.py            
â”œâ”€â”€ backend/               # FastAPI ÑĞµÑ€Ğ²ĞµÑ€
â”‚   â”œâ”€â”€ Dockerfile         
â”‚   â”œâ”€â”€ routers/           # API endpoints
â”‚   â”œâ”€â”€ firestore.py       # Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Firestore
â”‚   â””â”€â”€ main.py            
â”œâ”€â”€ mini-app/              # React Mini App
â”‚   â”œâ”€â”€ Dockerfile         
â”‚   â””â”€â”€ src/               
â”œâ”€â”€ cloudbuild.yaml        # CI/CD ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ deploy.sh              # Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ
â””â”€â”€ requirements.txt       
```

## âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Google Cloud

### 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹
gcloud projects create seeyay-ai --name="Ğ¡Ğ˜Ğ¯Ğ™ AI"
gcloud config set project seeyay-ai
```

### 2. Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ API

```bash
gcloud services enable \
    cloudbuild.googleapis.com \
    run.googleapis.com \
    secretmanager.googleapis.com \
    firestore.googleapis.com \
    aiplatform.googleapis.com
```

### 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ²

```bash
# Telegram Bot Token (Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ñƒ @BotFather)
echo -n "YOUR_BOT_TOKEN" | gcloud secrets create bot-token --data-file=-
```

### 4. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Firestore

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Firestore Ğ² Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ Native
gcloud firestore databases create --location=europe-west4
```

## ğŸš€ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹

### ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ñ‡ĞµÑ€ĞµĞ· Cloud Build

```bash
# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
export GCP_PROJECT_ID=your-project-id
export GCP_REGION=europe-west4

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹
./deploy.sh
```

### Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹

```bash
# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¸ Ğ¿ÑƒÑˆ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²
gcloud builds submit . --config=cloudbuild.yaml
```

## ğŸ’» Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

### 1. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
python -m venv venv

# ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ (Windows)
venv\Scripts\activate

# ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ (Linux/Mac)
source venv/bin/activate

# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
pip install -r requirements.txt
```

### 2. ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» `.env`:

```env
BOT_TOKEN=your_telegram_bot_token
GCP_PROJECT_ID=your-gcp-project-id
GCP_LOCATION=europe-west4
BACKEND_URL=http://localhost:8000
MINI_APP_URL=http://localhost:3000
```

### 3. ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ GCP

```bash
# Ğ”Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
gcloud auth application-default login
```

### 4. Ğ—Ğ°Ğ¿ÑƒÑĞº

```bash
# Backend
python -m uvicorn backend.main:app --reload --port 8000

# Bot
python -m bot.main

# Mini App
cd mini-app
npm install
npm run dev
```

## ğŸ—„ï¸ API Endpoints

| ĞœĞµÑ‚Ğ¾Ğ´ | ĞŸÑƒÑ‚ÑŒ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|------|----------|
| GET | /api/health | Health check |
| GET | /api/styles | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑÑ‚Ğ¸Ğ»ĞµĞ¹ |
| GET | /api/styles/{id} | Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑÑ‚Ğ¸Ğ»Ğµ |
| GET | /api/users/{telegram_id} | ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| POST | /api/users | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| PATCH | /api/users/{id}/balance | ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ |
| GET | /api/payments/packs | ĞŸĞ°ĞºĞµÑ‚Ñ‹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ |
| POST | /api/payments/purchase | ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ |
| POST | /api/generate | Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ |

## ğŸ¨ Ğ¡Ñ‚Ğ¸Ğ»Ğ¸

Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ñ‹ Ğ² `backend/styles_data.py`. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚:
- `id` - ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€
- `name` - Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼
- `category` - ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ (effect, look, new)
- `image` - Ğ¿ÑƒÑ‚ÑŒ Ğº Ğ¿Ñ€ĞµĞ²ÑŒÑ
- `prompt` - Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ´Ğ»Ñ Vertex AI

## ğŸ’³ Ğ¢Ğ°Ñ€Ğ¸Ñ„Ñ‹

| Ğ¢Ğ°Ñ€Ğ¸Ñ„ | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ | Ğ ĞµĞ¶Ğ¸Ğ¼ |
|-------|-----------|-------|
| Free | 3 | ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ |
| Basic | 30 | ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ + PRO |
| Pro | 100 | ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ + PRO |

## ğŸ”§ Cloud Run Services

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Memory | Min/Max |
|--------|----------|--------|---------|
| seeyay-bot | Telegram Ğ±Ğ¾Ñ‚ | 512Mi | 1/3 |
| seeyay-api | Backend API | 1Gi | 0/10 |
| seeyay-mini-app | React Mini App | 256Mi | 0/5 |

## ğŸ“ ĞŸĞ¾ÑĞ»Ğµ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ

1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ URL Mini App Ğ¸Ğ· Cloud Run
2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Menu Button Ğ² @BotFather:
   - `/mybots` â†’ Ğ’Ğ°Ñˆ Ğ±Ğ¾Ñ‚ â†’ Bot Settings â†’ Menu Button
   - Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ URL Mini App

## ğŸ”’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

- Ğ¡ĞµĞºÑ€ĞµÑ‚Ñ‹ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² Secret Manager
- IAM Ñ€Ğ¾Ğ»Ğ¸ Ğ´Ğ»Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ñ‹Ñ… Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ¾Ğ²
- HTTPS Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ² Cloud Run)
- Firestore Security Rules (Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸)

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT
